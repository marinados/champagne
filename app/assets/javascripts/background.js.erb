$(document).ready(function(){
  preload();
  $('body').fadeIn(3000, 'easeInQuad', function() {
    setTimeout(nextBackground, 7000)
  });
})

function preload() {
  if($('.mobile') > 0) {
  var arrayOfBackgrounds =[
    <%= "\'#{asset_path 'backgrounds/old_bottle.png'}\'" %>,
    <%= "\'#{asset_path 'backgrounds/frame.png'}\'" %>,
    <%= "\'#{asset_path 'backgrounds/bottle_neck.png'}\'" %>,
    <%= "\'#{asset_path 'backgrounds/coin.png'}\'" %>,
    <%= "\'#{asset_path 'backgrounds/log.png'}\'" %>,
    <%= "\'#{asset_path 'backgrounds/letter.png'}\'" %>,
    <%= "\'#{asset_path 'backgrounds/bottle_closeup.png'}\'" %>,
    <%= "\'#{asset_path 'backgrounds/7.jpg'}\'" %>,
    <%= "\'#{asset_path 'backgrounds/capsule.jpg'}\'" %>,
    <%= "\'#{asset_path 'backgrounds/8blue.jpg'}\'" %>,
    <%= "\'#{asset_path 'backgrounds/8black.jpg'}\'" %>,
    <%= "\'#{asset_path 'backgrounds/home.jpg'}\'" %> ];
  }
  else {
    var arrayOfBackgrounds =[

      <%= "\'#{asset_path 'backgrounds/mobile/frame_mobile.png'}\'" %>,
      <%= "\'#{asset_path 'backgrounds/mobile/bottle_neck_mobile.png'}\'" %>,
      <%= "\'#{asset_path 'backgrounds/mobile/log_mobile.png'}\'" %>,
      <%= "\'#{asset_path 'backgrounds/7.jpg'}\'" %>,
      <%= "\'#{asset_path 'backgrounds/mobile/8blue_mobile.jpg'}\'" %>,
      <%= "\'#{asset_path 'backgrounds/mobile/8black_mobile.jpg'}\'" %>,
      <%= "\'#{asset_path 'backgrounds/mobile/home.jpg'}\'" %> ];
  }

    $(arrayOfBackgrounds).each(function () {
      $('<img />').attr('src',this).appendTo('body').css('display','none');
    });

}

function nextBackground() {
  if ($('.false-div').length > 0) {
    var bg = $('.js-trigger');
    bg.fadeOut(3000).queue(function(){
    if (bg.hasClass('bg-history')) {
      bg.removeClass('bg-history').addClass('bg-history1').hide();
    }
    else if (bg.hasClass('bg-history1')) {
      bg.removeClass('bg-history1').addClass('bg-history').hide();
    }
    else if (bg.hasClass('bg-philosophy')) {
      bg.removeClass('bg-philosophy').addClass('bg-philosophy1').hide();
    }
    else if (bg.hasClass('bg-philosophy1')) {
      bg.removeClass('bg-philosophy1').addClass('bg-philosophy').hide();
    }
    else if (bg.hasClass('bg-vineyards')) {
      bg.removeClass('bg-vineyards').addClass('bg-vineyards1').hide();
    }
    else if (bg.hasClass('bg-vineyards1')) {
      bg.removeClass('bg-vineyards1').addClass('bg-vineyards2').hide();
    }
    else if (bg.hasClass('bg-vineyards2')) {
      bg.removeClass('bg-vineyards2').addClass('bg-vineyards').hide();
    }
    bg.dequeue();
    bg.fadeIn(3000, 'easeInQuad');
    setTimeout(nextBackground, 7000);
    })
  }
}



